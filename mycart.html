<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
    <style>
        nav{
            display: flex;
            border: 0px solid ;
            width: 100%;
            justify-content: space-between;
            height: 50px;
            background-color: #ffffff;
            margin-bottom: 30px;

        }
        nav>div{
            display: flex;
            text-align: center;
            align-items: center;
            width:100%;
        }
        
        #INP{
            display: flex;
            align-items: center;
            
            background-color: #f8f8f8;
            height: auto;
            border:0px solid blue;
            width: 70%;
            
        }
        nav>div:nth-child(1){
            display: flex;
        }
        nav>div:nth-child(1)
        img{
            border:0px solid red;
            height: 100%;
            width:15%;
            margin-right: 10px ;
            background-image: linear-gradient(to right, rgb(239, 219, 219), rgb(241, 245, 240));
        }
        nav>div:nth-child(1)
        div>input{
            border: 0px solid ;
            width: 200%;
            font-size: xx-small;
            background-color: #f8f8f8;
            padding: 10px;
        }
        nav>div:nth-child(2){
            text-align: end;
            width: 10%;
        }
        nav>div:nth-child(2)
        a{
            text-decoration: none;
            color: black;
            font-size: small;
        }
        #noCart{
            margin: auto;
            width: 30%;
            padding: 10px;
            text-align: center;
        }
        #noCart>img{
            width:50%
        }
        #noCart>button{
            background-color: #ff6f61;
            color: white;
            border-radius: 5px;
            padding: 15px 7px;
            border: 00px;
            font-size: large;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        }
        body{
            background-color: #f8f8f8;
        }
        footer{
            display: flex;
            justify-content: space-between;
            padding: 30px;
        }
        footer>div:nth-child(1)
        p>a{
            text-decoration: none;
            color: #ff6f61;
        }
        footer>div{
            width: 47%;
        }
        #cartDisplay>div{
            box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;
            background-image: linear-gradient(to right, rgb(189, 224, 239), rgb(208, 236, 205));;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;

        }
        #cartDisplay>div>div:nth-child(1){
            display: flex;
            justify-content: space-between;
        }
        #cartDisplay>div>div:nth-child(2){
            display: flex;
            justify-content: space-between;
        }
        #cartDisplay>div>div:nth-child(2)
        div:nth-child(1),a{
            font-size: larger;
            text-decoration: none;
            color: #ff6f61;
        }
        #cartDisplay>div>div:nth-child(2)
        div:nth-child(2){
            display: flex;
            align-items: center;
            font-size: 30px;
        }
        #cartDisplay>div>div:nth-child(2)
        div:nth-child(2)>p{
            margin: 10px;
        }
        #Display{
            display: flex;
            gap:25px;
            padding:5%

        }
        #Display>div:nth-child(1){
            width:80%;
        }
        #Display>div:nth-child(2){
            width:20%;
            height:50%;
            padding: 20px;
            flex-flow: row-reverse;
            margin: 165% 0 0 0;
            /* height:30em; */
            border-radius: 15px;
            border-color: animation(round) 2px solid red;
            border: 1px dashed aquamarine;            
            background-image: linear-gradient(to right, rgb(251, 227, 227), rgb(241, 242, 232));;
        }
        #check>div{
            display:flex ;
            justify-content: space-between;
        }
        #MRP{
            color: rgb(124, 191, 23);
        }
        #btn{
            color: white;
            border-radius: 5px;
            padding: 15px 7px;
            border:none;            
            font-size: large;
            width: 100%;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            background-color: #ff6f61;
        }
        #check>div>p{
            font-weight: bold;
            
        }
        #check>div>p:nth-child(1){
            color: rgb(255, 147, 6);
        }
        #paidto{
            color:green;
        }





    </style>
</head>
<body>
    <nav>
        <div>
            <img src="./medxlogo.png" alt="">
        
            <div id="INP">
                <input type="search"  id="searchName" placeholder="Search for Medicines and Health Products">
                <span id="searchBttn"><box-icon name='search-alt-2'></box-icon></span>
            </div>
        </div>
        <div><a href="">Need Help?</a></div>
    </nav>

    <div id="Display" >
        <!-- append cart id here -->
        <div id="cartDisplay">

        </div>
        <div id="checkOut">
            <div id="check">
                <div>
                    <p>Item Total(MRP)</p>
                    <p id="MRP"></p>
                </div> 
                <div>
                    <p>Shipping Fee</p>
                    <p>â‚¹ 80</p>
                </div>
                <div>
                    <p>To be paid</p>
                    <p id="paidto"></p>
                </div>

                <button id="btn">CHECKOUT</button>

            </div>
        </div>

    </div>

    <footer>
        <!-- enter footer -->
        <div>
            <hr>
            <p>
                Tata 1mg is a technology platform to facilitate transaction of business. The products and services are offered for <br>
                 sale by the sellers. The user authorizes the delivery personel to be his agent for delivery of the goods. For details <br>
                  read <a href="">terms and conditions</a>.
            </p>
        </div>
        <div>
            <hr>
            <div>
                <div>
                    <p>*1mg Cash will be credited 7 days after your complete order is delivered in <br>
                        case of Products and in case of Lab Services 1mg Cash will be credited within <br>
                        24 hours from the time of generation of test report. 1mg Cash will not be  <br> 
                       credited in case a return request is initiated for the order.
                   </p>
                </div>
                <div>
                    <p>**Coupon Discount value may change if the total order value changes.</p>
                </div>
                <div>
                    <p>***Items in your cart will always reflect the most recent price as compared to <br>
                         the prices in their product detail page.</p>
                </div>

            </div>
        </div>
    </footer>
</body>
</html>
<script>
    let container = document.querySelector("#cartDisplay")
    let cartItems = JSON.parse(localStorage.getItem("cart"))||[];
    let cartArr = JSON.parse(localStorage.getItem('cart'))
    let total =  document.querySelector("#MRP")
    let paid =  document.querySelector("#paidto")
    let totalMoney;
    if(cartItems.length===0){
        container.innerHTML =`
        <div id="noCart">
            <img src="https://www.1mg.com/images/online_consultation/empty-cart-icon.svg" alt="" >
            <h1>Oops!</h1>
            <p>Looks like there is no item in your cart yet.</p>
            <button>ADD MEDICINES</button>
            button.addEventListener("click", function(){
                window.location.href="./display.html"
            })
        </div>
        `
    }
    else{
        displayData(cartArr)
    }
    
    // displayData(cartArr)

    function displayData(cartArr){
        cartArr.innerHTML = null;
        

        cartArr.forEach((item,i)=>{
            let card = document.createElement("div") 
            card.setAttribute("class", "card")
            let info = document.createElement("div")
            let name = document.createElement("h3");
            name.innerText = item.name;
            let pri = document.createElement("h2");
            let x = item.price.split(" ");
            price = x[1]
            pri.innerText = x[0] +" "+(x[1] * item.select) 
            info.append(name,pri);

            card.append(info)

            let addRemove = document.createElement("div");
            let card2 = document.createElement("div") 
            card2.setAttribute("class", "card2")

            let remove = document.createElement("a")
            remove.href = "#";
            remove.setAttribute("id","remove")
            remove.innerHTML = `<i class="ri-delete-bin-5-line"></i> Remove` 
            card2.append(remove)
            remove.addEventListener("click",()=>{
                mySplice(i,1)
                

            })


            let card3 = document.createElement("div") 
            card3.setAttribute("class", "card3")        
            
            let decrement = document.createElement("button")
            decrement.innerText = "-"
            decrement.setAttribute("id", "decrement")
            decrement.addEventListener("click",()=>{
                if(p.innerText==1){
                    mySplice(i,1)
                    p.innerText --;
                }
                else if (p.innerText>1){
                    pri.innerText = pri.innerText - x[1];
                    p.innerText --;
                }
                
            })
            let p = document.createElement("p");
            p.innerText = item.select;
            
            let increment = document.createElement("button")
            increment.innerText = "+"
            increment.setAttribute("id", "increment")
            increment.addEventListener("click",()=>{
                if (p.innerText>=1){
                    p.innerText ++;
                    pri.innerText = x[1]*p.innerText

                }
                
            })

            card3.append(decrement,p,increment)

            addRemove.append(card2,card3)
            card.append(addRemove)




            container.append(card)

            total.innerText = 0;
            let sum = 0
            for(let x  of cartArr){
                let y = x.price.split(" ")
                sum += Number(y[1])*x.select;
            }
            total.innerText  = `â‚¹ ${sum}`
            paid.innerText = `â‚¹ ${sum+80}`
            totalMoney = `${sum+80}`

           

        })
        

        function mySplice(i,x){
            container.innerHTML = null;
                cartArr.splice(i,x);
                displayData(cartArr)
        }
    }

    // <button id="btn">CHECKOUT</button>
    let checkout = document.querySelector("#checkOut")
    checkout.addEventListener("click",()=>{
        console.log("click")
         total = totalMoney;
        localStorage.setItem("total",total);
    })


</script>
<script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>